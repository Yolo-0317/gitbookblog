# 为什么vue3使用proxy

## Object.defineProperty的缺点

通过劫持对象中属性的get和set函数，实现对对象属性的监听。

1. 一次只能对一个属性进行监听，需要遍历来对所有属性监听。
2. 当一个属性的值是一个对象时，需要递归遍历每个属性来监听
3. 对于对象新增属性，需要手动监听，vue.$set进行设置或者修改整个对象
4. 数组push、unshift方法增加的元素，无法监听

## proxy

1. 代理整个对象，不是某个特定属性，包括属性的增删改查
2. 操作更直观，不需要手动定义getter和setter
3. proxy的性能更好，因为不需要对每个属性手动定义getter/setter，避免对大数据对象循环定义带来的性能损耗
4. proxy代理后得到的对象，在读取属性时，V8可以进行优化
5. vue3在用proxy代理嵌套对象时，使用的是懒代理
